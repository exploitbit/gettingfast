{
  "tasks": [
    {
      "id": 1,
      "text": "to make it like this ğŸ˜€ğŸ˜€ h kya hai na bhiyaan ye",
      "timestamp": "2026-02-08 23:13:30",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 2,
      "text": "Commands:\nâ€¢ /add - Add a new task\nâ€¢ /tasks - View your tasks\nâ€¢ /download - Download JSON data\nâ€¢ /clear - Clear all data\n\nHow to use:\n1. Send any message - it will be saved\n2. View data on web interface\n3. Download JSON anytime\n\nStorage:\nâœ… GitHub Repository\nğŸ“ Local backup\n\n\nFir se pcm me know if you want to make it like this ğŸ˜€ğŸ˜€ h kya hai na bhiyaan ye to Fir se pcm me know if you want to make it like",
      "timestamp": "2026-02-08 23:13:37",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 3,
      "text": "ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—®",
      "timestamp": "2026-02-08 23:13:40",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 4,
      "text": "Internal Server Error\nThe server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.",
      "timestamp": "2026-02-08 23:13:45",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 5,
      "text": "/tasks",
      "timestamp": "2026-02-08 23:13:48",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 6,
      "text": "The issue is likely because the GitHub token isn't set properly. Let me fix the code to handle errors better and download directly from GitHub:\n\n`python\n\"\"\"\nSimple Task Tracker with GitHub Storage\nFixed version with better error handling\n\"\"\"\n\nimport os\nimport json\nimport threading\nfrom datetime import datetime\nimport pytz\nfrom flask import Flask, request, render_template_string, send_file, jsonify\nimport telebot\nfrom telebot.types import InlineKeyboardMarkup, InlineKeyboardButton\nimport requests\nimport base64\nimport io\n\n# ============= CONFIGURATION =============\nBOT_TOKEN = \"8388773187:AAFxz5U8GJ94Wf21VaGvFx9QQSZFU2Rd43I\"\nUSER_ID = \"8469993808\"\n\n# GitHub Configuration - REPLACE THESE!\n# Get token from: GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens\nGITHUB_TOKEN = os.getenv('GITHUB_TOKEN', 'ghp_yourtokenhere')  # Set in Koyeb env vars\nGITHUB_REPO = os.getenv('GITHUB_REPO', 'sandip232/task-tracker-data')  # Your repo\nGITHUB_FILE_PATH = \"data.json\"\n\n# Timezone setup\nIST = pytz.timezone('Asia/Kolkata')\n\n# Initialize Flask and Telegram bot\napp = Flask(name)\nbot = telebot.TeleBot(BOT_TOKEN)\n\n# ============= GITHUB HELPER FUNCTIONS =============\ndef load_from_github():\n    \"\"\"Load data from GitHub\"\"\"\n    try:\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            print(\"âŒ GitHub token not configured\")\n            return None\n            \n        url = f\"https://api.github.com/repos/{GITHUB_REPO}/contents/{GITHUB_FILE_PATH}\"\n        headers = {\n            \"Authorization\": f\"Bearer {GITHUB_TOKEN}\",\n            \"Accept\": \"application/vnd.github.v3+json\"\n        }\n        \n        response = requests.get(url, headers=headers, timeout=10)\n        \n        if response.status_code == 200:\n            content = response.json()[\"content\"]\n            decoded = base64.b64decode(content).decode('utf-8')\n            data = json.loads(decoded)\n            print(f\"âœ… Loaded {len(data.get('tasks', []))} tasks from GitHub\")\n            return data\n        elif response.status_code == 404:\n            print(\"ğŸ“„ GitHub file not found, will create on first save\")\n            return {\n                \"tasks\": [],\n                \"messages\": [],\n                \"notes\": [],\n                \"last_id\": 0\n            }\n        else:\n            print(f\"âŒ GitHub API Error {response.status_code}: {response.text[:100]}\")\n            return None\n    except requests.exceptions.Timeout:\n        print(\"âŒ GitHub request timeout\")\n        return None\n    except Exception as e:\n        print(f\"âŒ Error loading from GitHub: {str(e)}\")\n        return None\n\ndef save_to_github(data):\n    \"\"\"Save data to GitHub\"\"\"\n    try:\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            print(\"âŒ GitHub token not configured, saving locally only\")\n            return False\n            \n        url = f\"https://api.github.com/repos/{GITHUB_REPO}/contents/{GITHUB_FILE_PATH}\"\n        headers = {\n            \"Authorization\": f\"Bearer {GITHUB_TOKEN}\",\n            \"Accept\": \"application/vnd.github.v3+json\"\n        }\n        \n        # Get current SHA\n        sha = None\n        get_response = requests.get(url, headers=headers, timeout=5)\n        if get_response.status_code == 200:\n            sha = get_response.json()[\"sha\"]\n        \n        # Prepare content\n        content = json.dumps(data, indent=2, ensure_ascii=False)\n        encoded = base64.b64encode(content.encode('utf-8')).decode('utf-8')\n        \n        # Create payload\n        payload = {\n            \"message\": f\"Update tasks - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\",\n            \"content\": encoded,\n            \"branch\": \"main\"\n        }\n        \n        if sha:\n            payload[\"sha\"] = sha\n        \n        # Save to GitHub\n        response = requests.put(url, headers=headers, json=payload, timeout=10)",
      "timestamp": "2026-02-08 23:15:19",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 7,
      "text": "new_task = {\n            \"id\": data[\"last_id\"] + 1,\n            \"text\": message.text,\n            \"timestamp\": get_ist_time().strftime('%Y-%m-%d %H:%M:%S'),\n            \"date\": get_ist_time().strftime('%B %d, %Y'),\n            \"time\": get_ist_time().strftime('%I:%M %p'),\n            \"type\": \"task\"\n        }\n        \n        data[\"tasks\"].append(new_task)\n        data[\"last_id\"] += 1\n        \n        success = save_data(data)\n        \n        if success:\n            reply = f\"âœ… <b>Saved to GitHub!</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\"\n        else:\n            reply = f\"âš ï¸ <b>Saved locally only</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\\n\\n<i>GitHub sync failed</i>\"\n        \n        bot.reply_to(message, reply, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['tasks'])\ndef show_tasks(message):\n    \"\"\"Show all tasks\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()\n        \n        if not data[\"tasks\"]:\n            bot.reply_to(message, \"ğŸ“­ <b>No tasks yet!</b>\\n\\nSend a message to add your first task.\", parse_mode='HTML')\n            return\n        \n        response = \"ğŸ“‹ <b>Your Tasks:</b>\\n\\n\"\n        \n        for task in data[\"tasks\"][-10:]:  # Last 10\n            response += f\"â€¢ {task['text']}\\n\"\n            response += f\"  â° {task['time']} | ğŸ“… {task['date']}\\n\\n\"\n        \n        if len(data[\"tasks\"]) > 10:\n            response += f\"<i>Showing last 10 of {len(data['tasks'])} tasks</i>\"\n        \n        bot.reply_to(message, response, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error loading tasks:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['download'])\ndef download_command(message):\n    \"\"\"Download JSON from GitHub\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Try to get from GitHub first\n        data = load_from_github()\n        \n        if data is None:\n            # Fallback to local\n            data = load_data()\n            \n        json_str = json.dumps(data, indent=2, ensure_ascii=False)\n        \n        # Send as file\n        bot.send_document(\n            chat_id=message.chat.id,\n            document=io.BytesIO(json_str.encode('utf-8')),\n            visible_file_name='tasks_data.json',\n            caption=\"ğŸ“ <b>Tasks Data</b>\\n\\nJSON export of all tasks\"\n        )\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Download error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ <b>GitHub Token:</b> Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… <b>GitHub:</b> Connected\\nğŸ“Š <b>Tasks:</b> {len(test_data.get('tasks', []))}\\n\"\n            else:\n                status_msg = \"âš ï¸ <b>GitHub:</b> Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ <b>Local tasks:</b> {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• <b>Last ID:</b> {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° <b>Time:</b> {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Status error:</b> {str(e)}\", parse_mode='HTML')",
      "timestamp": "2026-02-08 23:15:23",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 8,
      "text": "return html.format(\n            now.strftime('%B %d, %Y'),\n            len(data[\"tasks\"]),\n            github_status,\n            last_update,\n            tasks_html\n        )\n        \n    except Exception as e:\n        error_html = f'''\n        <!DOCTYPE html>\n        <html>\n        <head><title>Error</title><style>body {{ padding: 40px; font-family: sans-serif; }}</style></head>\n        <body>\n            <h1>âš ï¸ Server Error</h1>\n            <div style=\"background: #fee; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n                <strong>Error:</strong> {str(e)}\n            </div>\n            <p>Please check server logs for details.</p>\n            <button onclick=\"location.reload()\">Retry</button>\n        </body>\n        </html>\n        '''\n        return error_html\n\n@app.route('/download')\nde",
      "timestamp": "2026-02-08 23:15:26",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 9,
      "text": "if response.status_code in [200, 201]:\n            print(f\"âœ… Saved {len(data.get('tasks', []))} tasks to GitHub\")\n            return True\n        else:\n            print(f\"âŒ GitHub save failed: {response.status_code} - {response.text[:200]}\")\n            return False\n            \n    except Exception as e:\n        print(f\"âŒ Error saving to GitHub: {str(e)}\")\n        return False\n\ndef get_ist_time():\n    \"\"\"Get current time in IST\"\"\"\n    return datetime.now(IST)\n\n# ============= LOCAL STORAGE (BACKUP) =============\nLOCAL_DATA_FILE = 'data_backup.json'\n\ndef load_data():\n    \"\"\"Load data - try GitHub first, then local backup\"\"\"\n    try:\n        github_data = load_from_github()\n        \n        if github_data is not None:\n            # Save local backup\n            with open(LOCAL_DATA_FILE, 'w', encoding='utf-8') as f:\n                json.dump(github_data, f, indent=2, ensure_ascii=False)\n            return github_data\n        \n        # Fallback to local file\n        if os.path.exists(LOCAL_DATA_FILE):\n            with open(LOCAL_DATA_FILE, 'r', encoding='utf-8') as f:\n                data = json.load(f)\n                print(f\"ğŸ“‚ Loaded {len(data.get('tasks', []))} tasks from local backup\")\n                return data\n                \n    except Exception as e:\n        print(f\"âŒ Error loading data: {str(e)}\")\n    \n    # Return empty data if all else fails\n    return {\n        \"tasks\": [],\n        \"messages\": [],\n        \"notes\": [],\n        \"last_id\": 0\n    }\n\ndef save_data(data):\n    \"\"\"Save data - try GitHub, always save local backup\"\"\"\n    success = False\n    \n    # Always save local backup first\n    try:\n        with open(LOCAL_DATA_FILE, 'w', encoding='utf-8') as f:\n            json.dump(data, f, indent=2, ensure_ascii=False)\n        print(f\"ğŸ“ Saved {len(data.get('tasks', []))} tasks to local backup\")\n    except Exception as e:\n        print(f\"âŒ Error saving local backup: {str(e)}\")\n    \n    # Try to save to GitHub\n    try:\n        success = save_to_github(data)\n    except Exception as e:\n        print(f\"âŒ Error in save_to_github: {str(e)}\")\n        success = False\n    \n    return success\n\n# ============= TELEGRAM BOT COMMANDS =============\n@bot.message_handler(commands=['start', 'help'])\ndef send_welcome(message):\n    \"\"\"Send welcome message\"\"\"\n    if str(message.chat.id) != USER_ID:\n        bot.reply_to(message, \"âŒ Unauthorized\")\n        return\n    \n    keyboard = InlineKeyboardMarkup(row_width=2)\n    keyboard.add(\n        InlineKeyboardButton(\"ğŸ“ Add Task\", callback_data='add_task'),\n        InlineKeyboardButton(\"ğŸ“‹ View Tasks\", callback_data='view_tasks'),\n        InlineKeyboardButton(\"ğŸ“¥ Download JSON\", callback_data='download_json'),\n        InlineKeyboardButton(\"ğŸ”„ Status\", callback_data='status')\n    )\n    \n    welcome = f\"\"\"\nğŸ¤– <b>Task Tracker Bot</b>\n<i>Data stored in GitHub</i>\n\n<b>Commands:</b>\nâ€¢ /add - Add new task\nâ€¢ /tasks - View all tasks  \nâ€¢ /download - Download JSON file\nâ€¢ /clear - Clear all data\nâ€¢ /status - Check connection\n\n<b>How to use:</b>\n1. Send any message to save as task\n2. View at: https://patient-maxie-sandip232-786edcb8.koyeb.app/\n3. Download JSON anytime\n\n<b>Current time:</b>\n{get_ist_time().strftime('%I:%M %p')} IST\n\"\"\"\n    bot.send_message(message.chat.id, welcome, parse_mode='HTML', reply_markup=keyboard)\n\n@bot.message_handler(commands=['add'])\ndef add_task_command(message):\n    \"\"\"Add task command\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    bot.reply_to(message, \"ğŸ“ <b>Send me your task:</b>\\n\\nJust type and send your message.\", parse_mode='HTML')\n\n@bot.message_handler(func=lambda message: True)\ndef save_message(message):\n    \"\"\"Save any message as task\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()",
      "timestamp": "2026-02-08 23:15:33",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 10,
      "text": "new_task = {\n            \"id\": data[\"last_id\"] + 1,\n            \"text\": message.text,\n            \"timestamp\": get_ist_time().strftime('%Y-%m-%d %H:%M:%S'),\n            \"date\": get_ist_time().strftime('%B %d, %Y'),\n            \"time\": get_ist_time().strftime('%I:%M %p'),\n            \"type\": \"task\"\n        }\n        \n        data[\"tasks\"].append(new_task)\n        data[\"last_id\"] += 1\n        \n        success = save_data(data)\n        \n        if success:\n            reply = f\"âœ… <b>Saved to GitHub!</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\"\n        else:\n            reply = f\"âš ï¸ <b>Saved locally only</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\\n\\n<i>GitHub sync failed</i>\"\n        \n        bot.reply_to(message, reply, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['tasks'])\ndef show_tasks(message):\n    \"\"\"Show all tasks\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()\n        \n        if not data[\"tasks\"]:\n            bot.reply_to(message, \"ğŸ“­ <b>No tasks yet!</b>\\n\\nSend a message to add your first task.\", parse_mode='HTML')\n            return\n        \n        response = \"ğŸ“‹ <b>Your Tasks:</b>\\n\\n\"\n        \n        for task in data[\"tasks\"][-10:]:  # Last 10\n            response += f\"â€¢ {task['text']}\\n\"\n            response += f\"  â° {task['time']} | ğŸ“… {task['date']}\\n\\n\"\n        \n        if len(data[\"tasks\"]) > 10:\n            response += f\"<i>Showing last 10 of {len(data['tasks'])} tasks</i>\"\n        \n        bot.reply_to(message, response, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error loading tasks:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['download'])\ndef download_command(message):\n    \"\"\"Download JSON from GitHub\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Try to get from GitHub first\n        data = load_from_github()\n        \n        if data is None:\n            # Fallback to local\n            data = load_data()\n            \n        json_str = json.dumps(data, indent=2, ensure_ascii=False)\n        \n        # Send as file\n        bot.send_document(\n            chat_id=message.chat.id,\n            document=io.BytesIO(json_str.encode('utf-8')),\n            visible_file_name='tasks_data.json',\n            caption=\"ğŸ“ <b>Tasks Data</b>\\n\\nJSON export of all tasks\"\n        )\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Download error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ <b>GitHub Token:</b> Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… <b>GitHub:</b> Connected\\nğŸ“Š <b>Tasks:</b> {len(test_data.get('tasks', []))}\\n\"\n            else:\n                status_msg = \"âš ï¸ <b>GitHub:</b> Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ <b>Local tasks:</b> {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• <b>Last ID:</b> {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° <b>Time:</b> {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Status error:</b> {str(e)}\", parse_mode='HTML')",
      "timestamp": "2026-02-08 23:15:37",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 11,
      "text": ".content { padding: 20px; }\n                .task-card { background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #4361ee; }\n                .task-text { font-size: 16px; margin-bottom: 10px; }\n                .task-meta { color: #666; font-size: 14px; display: flex; justify-content: space-between; }\n                .btn { display: inline-block; background: #4361ee; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; margin: 5px; }\n                .btn:hover { background: #3a56d4; }\n                .error { background: #fee; color: #c00; padding: 15px; border-radius: 8px; margin: 20px 0; }\n                .info { background: #e3f2fd; color: #1565c0; padding: 15px; border-radius: 8px; margin: 20px 0; }\n            </style>\n        </head>\n        <body>\n            <div class=\"container\">\n                <div class=\"header\">\n                    <h1>ğŸ“ Task Tracker</h1>\n                    <p>All your tasks in one place â€¢ {}</p>\n                </div>\n                \n                <div class=\"stats\">\n                    <div class=\"stat-card\">\n                        <div class=\"stat-number\">{}</div>\n                        <div class=\"stat-label\">Total Tasks</div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-number\">{}</div>\n                        <div class=\"stat-label\">GitHub Status</div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-number\">{}</div>\n                        <div class=\"stat-label\">Last Update</div>\n                    </div>\n                </div>\n                \n                <div class=\"content\">\n                    <div style=\"margin-bottom: 20px;\">\n                        <a href=\"/download\" class=\"btn\">ğŸ“¥ Download JSON</a>\n                        <a href=\"https://t.me/tasktracker_simple_bot\" target=\"_blank\" class=\"btn\">ğŸ¤– Telegram Bot</a>\n                        <button onclick=\"location.reload()\" class=\"btn\">ğŸ”„ Refresh</button>\n                    </div>\n                    \n                    {}\n                    \n                    <div class=\"info\">\n                        <strong>How to use:</strong><br>\n                        1. Send any message to Telegram bot<br>\n                        2. It auto-saves as a task<br>\n                        3. View here or download JSON\n                    </div>\n                </div>\n            </div>\n            \n            <script>\n                // Auto-refresh every 30 seconds\n                setTimeout(() => location.reload(), 30000);\n            </script>\n        </body>\n        </html>\n        '''\n        \n        # Prepare tasks HTML\n        if not data[\"tasks\"]:\n            tasks_html = '''\n            <div style=\"text-align: center; padding: 40px; color: #666;\">\n                <div style=\"font-size: 48px; margin-bottom: 20px;\">ğŸ“­</div>\n                <h3>No tasks yet</h3>\n                <p>Send a message to the Telegram bot to get started</p>\n            </div>\n            '''\n        else:\n            tasks_html = '<h3>Recent Tasks:</h3>'\n            for task in reversed(data[\"tasks\"][-20:]):  # Last 20\n                tasks_html += f'''\n                <div class=\"task-card\">\n                    <div class=\"task-text\">{task[\"text\"]}</div>\n                    <div class=\"task-meta\">\n                        <span>ğŸ“… {task[\"date\"]}</span>\n                        <span>â° {task[\"time\"]} IST</span>\n                    </div>\n                </div>\n                '''\n        \n        # Last update time\n        last_update = \"Never\"\n        if data[\"tasks\"]:\n            last_task = data[\"tasks\"][-1]\n            last_update = f\"{last_task['time']}\"",
      "timestamp": "2026-02-08 23:15:40",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 12,
      "text": "<b>Current time:</b>\n{get_ist_time().strftime('%I:%M %p')} IST\n\"\"\"\n    bot.send_message(message.chat.id, welcome, parse_mode='HTML', reply_markup=keyboard)\n\n@bot.message_handler(commands=['add'])\ndef add_task_command(message):\n    \"\"\"Add task command\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    bot.reply_to(message, \"ğŸ“ <b>Send me your task:</b>\\n\\nJust type and send your message.\", parse_mode='HTML')\n\n@bot.message_handler(func=lambda message: True)\ndef save_message(message):\n    \"\"\"Save any message as task\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()\n        \n        new_task = {\n            \"id\": data[\"last_id\"] + 1,\n            \"text\": message.text,\n            \"timestamp\": get_ist_time().strftime('%Y-%m-%d %H:%M:%S'),\n            \"date\": get_ist_time().strftime('%B %d, %Y'),\n            \"time\": get_ist_time().strftime('%I:%M %p'),\n            \"type\": \"task\"\n        }\n        \n        data[\"tasks\"].append(new_task)\n        data[\"last_id\"] += 1\n        \n        success = save_data(data)\n        \n        if success:\n            reply = f\"âœ… <b>Saved to GitHub!</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\"\n        else:\n            reply = f\"âš ï¸ <b>Saved locally only</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\\n\\n<i>GitHub sync failed</i>\"\n        \n        bot.reply_to(message, reply, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['tasks'])\ndef show_tasks(message):\n    \"\"\"Show all tasks\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()\n        \n        if not data[\"tasks\"]:\n            bot.reply_to(message, \"ğŸ“­ <b>No tasks yet!</b>\\n\\nSend a message to add your first task.\", parse_mode='HTML')\n            return\n        \n        response = \"ğŸ“‹ <b>Your Tasks:</b>\\n\\n\"\n        \n        for task in data[\"tasks\"][-10:]:  # Last 10\n            response += f\"â€¢ {task['text']}\\n\"\n            response += f\"  â° {task['time']} | ğŸ“… {task['date']}\\n\\n\"\n        \n        if len(data[\"tasks\"]) > 10:\n            response += f\"<i>Showing last 10 of {len(data['tasks'])} tasks</i>\"\n        \n        bot.reply_to(message, response, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error loading tasks:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['download'])\ndef download_command(message):\n    \"\"\"Download JSON from GitHub\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Try to get from GitHub first\n        data = load_from_github()\n        \n        if data is None:\n            # Fallback to local\n            data = load_data()\n            \n        json_str = json.dumps(data, indent=2, ensure_ascii=False)\n        \n        # Send as file\n        bot.send_document(\n            chat_id=message.chat.id,\n            document=io.BytesIO(json_str.encode('utf-8')),\n            visible_file_name='tasks_data.json',\n            caption=\"ğŸ“ <b>Tasks Data</b>\\n\\nJSON export of all tasks\"\n        )\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Download error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ <b>GitHub Token:</b> Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… <b>GitHub:</b> Connected\\nğŸ“Š <b>Tasks:</b> {len(test_data.get('tasks', []))}\\n\"",
      "timestamp": "2026-02-08 23:15:45",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 13,
      "text": "else:\n                status_msg = \"âš ï¸ <b>GitHub:</b> Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ <b>Local tasks:</b> {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• <b>Last ID:</b> {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° <b>Time:</b> {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Status error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['clear'])\ndef clear_command(message):\n    \"\"\"Clear all data\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    keyboard = InlineKeyboardMarkup()\n    keyboard.add(\n        InlineKeyboardButton(\"âœ… Yes, delete all\", callback_data='confirm_clear'),\n        InlineKeyboardButton(\"âŒ Cancel\", callback_data='cancel_clear')\n    )\n    \n    bot.reply_to(message, \"âš ï¸ <b>Delete ALL data?</b>\\n\\nThis will remove all tasks from GitHub and local storage.\", \n                 parse_mode='HTML', reply_markup=keyboard)\n\n@bot.callback_query_handler(func=lambda call: True)\ndef handle_callback(call):\n    \"\"\"Handle callback queries\"\"\"\n    chat_id = call.message.chat.id\n    \n    if str(chat_id) != USER_ID:\n        return\n    \n    try:\n        if call.data == 'add_task':\n            bot.send_message(chat_id, \"ğŸ“ <b>Send your task message:</b>\", parse_mode='HTML')\n        \n        elif call.data == 'view_tasks':\n            show_tasks(call.message)\n        \n        elif call.data == 'download_json':\n            download_command(call.message)\n        \n        elif call.data == 'status':\n            status_command(call.message)\n        \n        elif call.data == 'confirm_clear':\n            empty_data = {\n                \"tasks\": [],\n                \"messages\": [],\n                \"notes\": [],\n                \"last_id\": 0\n            }\n            success = save_data(empty_data)\n            \n            if success:\n                bot.edit_message_text(\"ğŸ—‘ï¸ <b>All data cleared!</b>\\n\\nGitHub and local storage emptied.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n            else:\n                bot.edit_message_text(\"âš ï¸ <b>Partial clear</b>\\n\\nLocal data cleared, GitHub may have failed.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n        \n        elif call.data == 'cancel_clear':\n            bot.edit_message_text(\"âœ… <b>Cancelled</b>\\n\\nNo data was deleted.\", \n                                 chat_id, call.message.message_id, parse_mode='HTML')\n    \n    except Exception as e:\n        bot.answer_callback_query(call.id, f\"Error: {str(e)}\")\n    \n    bot.answer_callback_query(call.id)\n\n# ============= FLASK WEB APP =============\n@app.route('/')\ndef index():\n    \"\"\"Web interface\"\"\"\n    try:\n        data = load_data()\n        now = get_ist_time()\n        \n        # Check GitHub status\n        github_status = \"âŒ Not configured\"\n        if GITHUB_TOKEN and GITHUB_TOKEN != 'ghp_yourtokenhere':\n            test = load_from_github()\n            github_status = \"âœ… Connected\" if test is not None else \"âš ï¸ Connection failed\"\n        else:\n            github_status = \"âŒ Token missing\"\n        \n        html = '''\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>Task Tracker</title>\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <style>\n                * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }\n                body { background: #f0f2f5; padding: 20px; }\n                .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }",
      "timestamp": "2026-02-08 23:15:49",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 14,
      "text": "def save_to_github(data):\n    \"\"\"Save data to GitHub\"\"\"\n    try:\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            print(\"âŒ GitHub token not configured, saving locally only\")\n            return False\n            \n        url = f\"https://api.github.com/repos/{GITHUB_REPO}/contents/{GITHUB_FILE_PATH}\"\n        headers = {\n            \"Authorization\": f\"Bearer {GITHUB_TOKEN}\",\n            \"Accept\": \"application/vnd.github.v3+json\"\n        }\n        \n        # Get current SHA\n        sha = None\n        get_response = requests.get(url, headers=headers, timeout=5)\n        if get_response.status_code == 200:\n            sha = get_response.json()[\"sha\"]\n        \n        # Prepare content\n        content = json.dumps(data, indent=2, ensure_ascii=False)\n        encoded = base64.b64encode(content.encode('utf-8')).decode('utf-8')\n        \n        # Create payload\n        payload = {\n            \"message\": f\"Update tasks - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\",\n            \"content\": encoded,\n            \"branch\": \"main\"\n        }\n        \n        if sha:\n            payload[\"sha\"] = sha\n        \n        # Save to GitHub\n        response = requests.put(url, headers=headers, json=payload, timeout=10)\n        \n        if response.status_code in [200, 201]:\n            print(f\"âœ… Saved {len(data.get('tasks', []))} tasks to GitHub\")\n            return True\n        else:\n            print(f\"âŒ GitHub save failed: {response.status_code} - {response.text[:200]}\")\n            return False\n            \n    except Exception as e:\n        print(f\"âŒ Error saving to GitHub: {str(e)}\")\n        return False\n\ndef get_ist_time():\n    \"\"\"Get current time in IST\"\"\"\n    return datetime.now(IST)\n\n# ============= LOCAL STORAGE (BACKUP) =============\nLOCAL_DATA_FILE = 'data_backup.json'\n\ndef load_data():\n    \"\"\"Load data - try GitHub first, then local backup\"\"\"\n    try:\n        github_data = load_from_github()\n        \n        if github_data is not None:\n            # Save local backup\n            with open(LOCAL_DATA_FILE, 'w', encoding='utf-8') as f:\n                json.dump(github_data, f, indent=2, ensure_ascii=False)\n            return github_data\n        \n        # Fallback to local file\n        if os.path.exists(LOCAL_DATA_FILE):\n            with open(LOCAL_DATA_FILE, 'r', encoding='utf-8') as f:\n                data = json.load(f)\n                print(f\"ğŸ“‚ Loaded {len(data.get('tasks', []))} tasks from local backup\")\n                return data\n                \n    except Exception as e:\n        print(f\"âŒ Error loading data: {str(e)}\")\n    \n    # Return empty data if all else fails\n    return {\n        \"tasks\": [],\n        \"messages\": [],\n        \"notes\": [],\n        \"last_id\": 0\n    }\n\ndef save_data(data):\n    \"\"\"Save data - try GitHub, always save local backup\"\"\"\n    success = False\n    \n    # Always save local backup first\n    try:\n        with open(LOCAL_DATA_FILE, 'w', encoding='utf-8') as f:\n            json.dump(data, f, indent=2, ensure_ascii=False)\n        print(f\"ğŸ“ Saved {len(data.get('tasks', []))} tasks to local backup\")\n    except Exception as e:\n        print(f\"âŒ Error saving local backup: {str(e)}\")\n    \n    # Try to save to GitHub\n    try:\n        success = save_to_github(data)\n    except Exception as e:\n        print(f\"âŒ Error in save_to_github: {str(e)}\")\n        success = False\n    \n    return success\n\n# ============= TELEGRAM BOT COMMANDS =============\n@bot.message_handler(commands=['start', 'help'])\ndef send_welcome(message):\n    \"\"\"Send welcome message\"\"\"\n    if str(message.chat.id) != USER_ID:\n        bot.reply_to(message, \"âŒ Unauthorized\")\n        return\n    \n    keyboard = InlineKeyboardMarkup(row_width=2)\n    keyboard.add(\n        InlineKeyboardButton(\"ğŸ“ Add Task\", callback_data='add_task'),",
      "timestamp": "2026-02-08 23:15:52",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 15,
      "text": "InlineKeyboardButton(\"ğŸ“‹ View Tasks\", callback_data='view_tasks'),\n        InlineKeyboardButton(\"ğŸ“¥ Download JSON\", callback_data='download_json'),\n        InlineKeyboardButton(\"ğŸ”„ Status\", callback_data='status')\n    )\n    \n    welcome = f\"\"\"\nğŸ¤– <b>Task Tracker Bot</b>\n<i>Data stored in GitHub</i>\n\n<b>Commands:</b>\nâ€¢ /add - Add new task\nâ€¢ /tasks - View all tasks  \nâ€¢ /download - Download JSON file\nâ€¢ /clear - Clear all data\nâ€¢ /status - Check connection\n\n<b>How to use:</b>\n1. Send any message to save as task\n2. View at: https://patient-maxie-sandip232-786edcb8.koyeb.app/\n3. Download JSON anytime\n\n<b>Current time:</b>\n{get_ist_time().strftime('%I:%M %p')} IST\n\"\"\"\n    bot.send_message(message.chat.id, welcome, parse_mode='HTML', reply_markup=keyboard)\n\n@bot.message_handler(commands=['add'])\ndef add_task_command(message):\n    \"\"\"Add task command\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    bot.reply_to(message, \"ğŸ“ <b>Send me your task:</b>\\n\\nJust type and send your message.\", parse_mode='HTML')\n\n@bot.message_handler(func=lambda message: True)\ndef save_message(message):\n    \"\"\"Save any message as task\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()\n        \n        new_task = {\n            \"id\": data[\"last_id\"] + 1,\n            \"text\": message.text,\n            \"timestamp\": get_ist_time().strftime('%Y-%m-%d %H:%M:%S'),\n            \"date\": get_ist_time().strftime('%B %d, %Y'),\n            \"time\": get_ist_time().strftime('%I:%M %p'),\n            \"type\": \"task\"\n        }\n        \n        data[\"tasks\"].append(new_task)\n        data[\"last_id\"] += 1\n        \n        success = save_data(data)\n        \n        if success:\n            reply = f\"âœ… <b>Saved to GitHub!</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\"\n        else:\n            reply = f\"âš ï¸ <b>Saved locally only</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\\n\\n<i>GitHub sync failed</i>\"\n        \n        bot.reply_to(message, reply, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['tasks'])\ndef show_tasks(message):\n    \"\"\"Show all tasks\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()\n        \n        if not data[\"tasks\"]:\n            bot.reply_to(message, \"ğŸ“­ <b>No tasks yet!</b>\\n\\nSend a message to add your first task.\", parse_mode='HTML')\n            return\n        \n        response = \"ğŸ“‹ <b>Your Tasks:</b>\\n\\n\"\n        \n        for task in data[\"tasks\"][-10:]:  # Last 10\n            response += f\"â€¢ {task['text']}\\n\"\n            response += f\"  â° {task['time']} | ğŸ“… {task['date']}\\n\\n\"\n        \n        if len(data[\"tasks\"]) > 10:\n            response += f\"<i>Showing last 10 of {len(data['tasks'])} tasks</i>\"\n        \n        bot.reply_to(message, response, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error loading tasks:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['download'])\ndef download_command(message):\n    \"\"\"Download JSON from GitHub\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Try to get from GitHub first\n        data = load_from_github()\n        \n        if data is None:\n            # Fallback to local\n            data = load_data()\n            \n        json_str = json.dumps(data, indent=2, ensure_ascii=False)\n        \n        # Send as file\n        bot.send_document(\n            chat_id=message.chat.id,\n            document=io.BytesIO(json_str.encode('utf-8')),\n            visible_file_name='tasks_data.json',\n            caption=\"ğŸ“ <b>Tasks Data</b>\\n\\nJSON export of all tasks\"\n        )\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Download error:</b> {str(e)}\", parse_mode='HTML')",
      "timestamp": "2026-02-08 23:15:56",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 16,
      "text": "github_status = \"âŒ Token missing\"\n        \n        html = '''\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>Task Tracker</title>\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <style>\n                * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }\n                body { background: #f0f2f5; padding: 20px; }\n                .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n                .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px 10px 0 0; }\n                .header h1 { font-size: 24px; margin-bottom: 10px; }\n                .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; padding: 20px; }\n                .stat-card { background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center; }\n                .stat-number { font-size: 28px; font-weight: bold; color: #4361ee; }\n                .stat-label { color: #666; font-size: 14px; margin-top: 5px; }\n                .content { padding: 20px; }\n                .task-card { background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #4361ee; }\n                .task-text { font-size: 16px; margin-bottom: 10px; }\n                .task-meta { color: #666; font-size: 14px; display: flex; justify-content: space-between; }\n                .btn { display: inline-block; background: #4361ee; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; margin: 5px; }\n                .btn:hover { background: #3a56d4; }\n                .error { background: #fee; color: #c00; padding: 15px; border-radius: 8px; margin: 20px 0; }\n                .info { background: #e3f2fd; color: #1565c0; padding: 15px; border-radius: 8px; margin: 20px 0; }\n            </style>\n        </head>\n        <body>\n            <div class=\"container\">\n                <div class=\"header\">\n                    <h1>ğŸ“ Task Tracker</h1>\n                    <p>All your tasks in one place â€¢ {}</p>\n                </div>\n                \n                <div class=\"stats\">\n                    <div class=\"stat-card\">\n                        <div class=\"stat-number\">{}</div>\n                        <div class=\"stat-label\">Total Tasks</div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-number\">{}</div>\n                        <div class=\"stat-label\">GitHub Status</div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-number\">{}</div>\n                        <div class=\"stat-label\">Last Update</div>\n                    </div>\n                </div>\n                \n                <div class=\"content\">\n                    <div style=\"margin-bottom: 20px;\">\n                        <a href=\"/download\" class=\"btn\">ğŸ“¥ Download JSON</a>\n                        <a href=\"https://t.me/tasktracker_simple_bot\" target=\"_blank\" class=\"btn\">ğŸ¤– Telegram Bot</a>\n                        <button onclick=\"location.reload()\" class=\"btn\">ğŸ”„ Refresh</button>\n                    </div>\n                    \n                    {}\n                    \n                    <div class=\"info\">\n                        <strong>How to use:</strong><br>\n                        1. Send any message to Telegram bot<br>\n                        2. It auto-saves as a task<br>\n                        3. View here or download JSON\n                    </div>\n                </div>\n            </div>\n            \n            <script>\n                // Auto-refresh every 30 seconds",
      "timestamp": "2026-02-08 23:15:59",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 17,
      "text": "âš ï¸ Saved Locally (GitHub Error)\n\n@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ GitHub Token: Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… GitHub: Connected\\nğŸ“Š Tasks: {len(test_data.get('tasks', []))}\\n\"\n            else:\n                status_msg = \"âš ï¸ GitHub: Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ Local tasks: {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• Last ID: {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° Time: {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ Status error: {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['clear'])\ndef clear_command(message):\n    \"\"\"Clear all data\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    keyboard = InlineKeyboardMarkup()\n    keyboard.add(\n        InlineKeyboardButton(\"âœ… Yes, delete all\", callback_data='confirm_clear'),\n        InlineKeyboardButton(\"âŒ Cancel\", callback_data='cancel_clear')\n    )\n    \n    bot.reply_to(message, \"âš ï¸ Delete ALL data?\\n\\nThis will remove all tasks from GitHub and local storage.\", \n                 parse_mode='HTML', reply_markup=keyboard)\n\n@bot.callback_query_handler(func=lambda call: True)\ndef handle_callback(call):\n    \"\"\"Handle callback queries\"\"\"\n    chat_id = call.message.chat.id\n    \n    if str(chat_id) != USER_ID:\n        return\n    \n    try:\n        if call.data == 'add_task':\n            bot.send_message(chat_id, \"ğŸ“ Send your task message:\", parse_mode='HTML')\n        \n        elif call.data == 'view_tasks':\n            show_tasks(call.message)\n        \n        elif call.data == 'download_json':\n            download_command(call.message)\n        \n        elif call.data == 'status':\n            status_command(call.message)\n        \n        elif call.data == 'confirm_clear':\n            empty_data = {\n                \"tasks\": [],\n                \"messages\": [],\n                \"notes\": [],\n                \"last_id\": 0\n            }\n            success = save_data(empty_data)\n            \n            if success:\n                bot.edit_message_text(\"ğŸ—‘ï¸ All data cleared!\\n\\nGitHub and local storage emptied.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n            else:\n                bot.edit_message_text(\"âš ï¸ Partial clear\\n\\nLocal data cleared, GitHub may have failed.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n        \n        elif call.data == 'cancel_clear':\n            bot.edit_message_text(\"âœ… Cancelled\\n\\nNo data was deleted.\", \n                                 chat_id, call.message.message_id, parse_mode='HTML')\n    \n    except Exception as e:\n        bot.answer_callback_query(call.id, f\"Error: {str(e)}\")\n    \n    bot.answer_callback_query(call.id)\n\n# ============= FLASK WEB APP =============\n@app.route('/')\ndef index():\n    \"\"\"Web interface\"\"\"\n    try:\n        data = load_data()\n        now = get_ist_time()\n        \n        # Check GitHub status\n        github_status = \"âŒ Not configured\"\n        if GITHUB_TOKEN and GITHUB_TOKEN != 'ghp_yourtokenhere':\n            test = load_from_github()\n            github_status = \"âœ… Connected\" if test is not None else \"âš ï¸ Connection failed\"\n        else:\n\nğŸ“… February 08, 2026\nâ° 11:15 PM IST\n\nSaved to local backup onlyâš ï¸ Saved Locally (GitHub Error)",
      "timestamp": "2026-02-08 23:16:22",
      "date": "February 08, 2026",
      "time": "11:16 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 18,
      "text": "@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ GitHub Token: Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… GitHub: Connected\\nğŸ“Š Tasks: {len(test_data.get('tasks', []))}\\n\"\n            else:\n                status_msg = \"âš ï¸ GitHub: Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ Local tasks: {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• Last ID: {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° Time: {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ Status error: {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['clear'])\ndef clear_command(message):\n    \"\"\"Clear all data\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    keyboard = InlineKeyboardMarkup()\n    keyboard.add(\n        InlineKeyboardButton(\"âœ… Yes, delete all\", callback_data='confirm_clear'),\n        InlineKeyboardButton(\"âŒ Cancel\", callback_data='cancel_clear')\n    )\n    \n    bot.reply_to(message, \"âš ï¸ Delete ALL data?\\n\\nThis will remove all tasks from GitHub and local storage.\", \n                 parse_mode='HTML', reply_markup=keyboard)\n\n@bot.callback_query_handler(func=lambda call: True)\ndef handle_callback(call):\n    \"\"\"Handle callback queries\"\"\"\n    chat_id = call.message.chat.id\n    \n    if str(chat_id) != USER_ID:\n        return\n    \n    try:\n        if call.data == 'add_task':\n            bot.send_message(chat_id, \"ğŸ“ Send your task message:\", parse_mode='HTML')\n        \n        elif call.data == 'view_tasks':\n            show_tasks(call.message)\n        \n        elif call.data == 'download_json':\n            download_command(call.message)\n        \n        elif call.data == 'status':\n            status_command(call.message)\n        \n        elif call.data == 'confirm_clear':\n            empty_data = {\n                \"tasks\": [],\n                \"messages\": [],\n                \"notes\": [],\n                \"last_id\": 0\n            }\n            success = save_data(empty_data)\n            \n            if success:\n                bot.edit_message_text(\"ğŸ—‘ï¸ All data cleared!\\n\\nGitHub and local storage emptied.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n            else:\n                bot.edit_message_text(\"âš ï¸ Partial clear\\n\\nLocal data cleared, GitHub may have failed.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n        \n        elif call.data == 'cancel_clear':\n            bot.edit_message_text(\"âœ… Cancelled\\n\\nNo data was deleted.\", \n                                 chat_id, call.message.message_id, parse_mode='HTML')\n    \n    except Exception as e:\n        bot.answer_callback_query(call.id, f\"Error: {str(e)}\")\n    \n    bot.answer_callback_query(call.id)\n\n# ============= FLASK WEB APP =============\n@app.route('/')\ndef index():\n    \"\"\"Web interface\"\"\"\n    try:\n        data = load_data()\n        now = get_ist_time()\n        \n        # Check GitHub status\n        github_status = \"âŒ Not configured\"\n        if GITHUB_TOKEN and GITHUB_TOKEN != 'ghp_yourtokenhere':\n            test = load_from_github()\n            github_status = \"âœ… Connected\" if test is not None else \"âš ï¸ Connection failed\"\n        else:\n\nğŸ“… February 08, 2026\nâ° 11:15 PM IST\n\nSaved to local backup onlyâš ï¸ Saved Locally (GitHub Error)",
      "timestamp": "2026-02-08 23:16:26",
      "date": "February 08, 2026",
      "time": "11:16 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 19,
      "text": "@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ GitHub Token: Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… GitHub: Connected\\nğŸ“Š Tasks: {len(test_data.get('tasks', []))}\\n\"\n            else:\n                status_msg = \"âš ï¸ GitHub: Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ Local tasks: {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• Last ID: {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° Time: {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ Status error: {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['clear'])\ndef clear_command(message):\n    \"\"\"Clear all data\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    keyboard = InlineKeyboardMarkup()\n    keyboard.add(\n        InlineKeyboardButton(\"âœ… Yes, delete all\", callback_data='confirm_clear'),\n        InlineKeyboardButton(\"âŒ Cancel\", callback_data='cancel_clear')\n    )\n    \n    bot.reply_to(message, \"âš ï¸ Delete ALL data?\\n\\nThis will remove all tasks from GitHub and local storage.\", \n                 parse_mode='HTML', reply_markup=keyboard)\n\n@bot.callback_query_handler(func=lambda call: True)\ndef handle_callback(call):\n    \"\"\"Handle callback queries\"\"\"\n    chat_id = call.message.chat.id\n    \n    if str(chat_id) != USER_ID:\n        return\n    \n    try:\n        if call.data == 'add_task':\n            bot.send_message(chat_id, \"ğŸ“ Send your task message:\", parse_mode='HTML')\n        \n        elif call.data == 'view_tasks':\n            show_tasks(call.message)\n        \n        elif call.data == 'download_json':\n            download_command(call.message)\n        \n        elif call.data == 'status':\n            status_command(call.message)\n        \n        elif call.data == 'confirm_clear':\n            empty_data = {\n                \"tasks\": [],\n                \"messages\": [],\n                \"notes\": [],\n                \"last_id\": 0\n            }\n            success = save_data(empty_data)\n            \n            if success:\n                bot.edit_message_text(\"ğŸ—‘ï¸ All data cleared!\\n\\nGitHub and local storage emptied.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n            else:\n                bot.edit_message_text(\"âš ï¸ Partial clear\\n\\nLocal data cleared, GitHub may have failed.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n        \n        elif call.data == 'cancel_clear':\n            bot.edit_message_text(\"âœ… Cancelled\\n\\nNo data was deleted.\", \n                                 chat_id, call.message.message_id, parse_mode='HTML')\n    \n    except Exception as e:\n        bot.answer_callback_query(call.id, f\"Error: {str(e)}\")\n    \n    bot.answer_callback_query(call.id)\n\n# ============= FLASK WEB APP =============\n@app.route('/')\ndef index():\n    \"\"\"Web interface\"\"\"\n    try:\n        data = load_data()\n        now = get_ist_time()\n        \n        # Check GitHub status\n        github_status = \"âŒ Not configured\"\n        if GITHUB_TOKEN and GITHUB_TOKEN != 'ghp_yourtokenhere':\n            test = load_from_github()\n            github_status = \"âœ… Connected\" if test is not None else \"âš ï¸ Connection failed\"\n        else:\n\nğŸ“… February 08, 2026\nâ° 11:15 PM IST\n\nSaved to local backup onlyâš ï¸ Saved Locally (GitHub Error)",
      "timestamp": "2026-02-08 23:16:29",
      "date": "February 08, 2026",
      "time": "11:16 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 20,
      "text": "@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ GitHub Token: Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… GitHub: Connected\\nğŸ“Š Tasks: {len(test_data.get('tasks', []))}\\n\"\n            else:\n                status_msg = \"âš ï¸ GitHub: Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ Local tasks: {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• Last ID: {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° Time: {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ Status error: {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['clear'])\ndef clear_command(message):\n    \"\"\"Clear all data\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    keyboard = InlineKeyboardMarkup()\n    keyboard.add(\n        InlineKeyboardButton(\"âœ… Yes, delete all\", callback_data='confirm_clear'),\n        InlineKeyboardButton(\"âŒ Cancel\", callback_data='cancel_clear')\n    )\n    \n    bot.reply_to(message, \"âš ï¸ Delete ALL data?\\n\\nThis will remove all tasks from GitHub and local storage.\", \n                 parse_mode='HTML', reply_markup=keyboard)\n\n@bot.callback_query_handler(func=lambda call: True)\ndef handle_callback(call):\n    \"\"\"Handle callback queries\"\"\"\n    chat_id = call.message.chat.id\n    \n    if str(chat_id) != USER_ID:\n        return\n    \n    try:\n        if call.data == 'add_task':\n            bot.send_message(chat_id, \"ğŸ“ Send your task message:\", parse_mode='HTML')\n        \n        elif call.data == 'view_tasks':\n            show_tasks(call.message)\n        \n        elif call.data == 'download_json':\n            download_command(call.message)\n        \n        elif call.data == 'status':\n            status_command(call.message)\n        \n        elif call.data == 'confirm_clear':\n            empty_data = {\n                \"tasks\": [],\n                \"messages\": [],\n                \"notes\": [],\n                \"last_id\": 0\n            }\n            success = save_data(empty_data)\n            \n            if success:\n                bot.edit_message_text(\"ğŸ—‘ï¸ All data cleared!\\n\\nGitHub and local storage emptied.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n            else:\n                bot.edit_message_text(\"âš ï¸ Partial clear\\n\\nLocal data cleared, GitHub may have failed.\", \n                                     chat_id, call.message.message_id, parse_mode='HTML')\n        \n        elif call.data == 'cancel_clear':\n            bot.edit_message_text(\"âœ… Cancelled\\n\\nNo data was deleted.\", \n                                 chat_id, call.message.message_id, parse_mode='HTML')\n    \n    except Exception as e:\n        bot.answer_callback_query(call.id, f\"Error: {str(e)}\")\n    \n    bot.answer_callback_query(call.id)\n\n# ============= FLASK WEB APP =============\n@app.route('/')\ndef index():\n    \"\"\"Web interface\"\"\"\n    try:\n        data = load_data()\n        now = get_ist_time()\n        \n        # Check GitHub status\n        github_status = \"âŒ Not configured\"\n        if GITHUB_TOKEN and GITHUB_TOKEN != 'ghp_yourtokenhere':\n            test = load_from_github()\n            github_status = \"âœ… Connected\" if test is not None else \"âš ï¸ Connection failed\"\n        else:\n\nğŸ“… February 08, 2026\nâ° 11:15 PM IST\n\nSaved to local backup onlyâš ï¸ Saved Locally (GitHub Error)",
      "timestamp": "2026-02-08 23:16:35",
      "date": "February 08, 2026",
      "time": "11:16 PM",
      "type": "task",
      "source": "telegram"
    }
  ],
  "messages": [],
  "notes": [],
  "last_id": 20
}