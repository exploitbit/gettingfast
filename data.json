{
  "tasks": [
    {
      "id": 1,
      "text": "to make it like this ğŸ˜€ğŸ˜€ h kya hai na bhiyaan ye",
      "timestamp": "2026-02-08 23:13:30",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 2,
      "text": "Commands:\nâ€¢ /add - Add a new task\nâ€¢ /tasks - View your tasks\nâ€¢ /download - Download JSON data\nâ€¢ /clear - Clear all data\n\nHow to use:\n1. Send any message - it will be saved\n2. View data on web interface\n3. Download JSON anytime\n\nStorage:\nâœ… GitHub Repository\nğŸ“ Local backup\n\n\nFir se pcm me know if you want to make it like this ğŸ˜€ğŸ˜€ h kya hai na bhiyaan ye to Fir se pcm me know if you want to make it like",
      "timestamp": "2026-02-08 23:13:37",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 3,
      "text": "ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—® ğ—¯ğ—µğ—¶ğ˜†ğ—®ğ—®ğ—» ğ˜†ğ—² ğ˜ğ—¼ ğ—™ğ—¶ğ—¿ ğ˜€ğ—² ğ—½ğ—°ğ—º ğ—ºğ—² ğ—¸ğ—»ğ—¼ğ˜„ ğ—¶ğ—³ ğ˜†ğ—¼ğ˜‚ ğ˜„ğ—®ğ—»ğ˜ ğ˜ğ—¼ ğ—ºğ—®ğ—¸ğ—² ğ—¶ğ˜ ğ—¹ğ—¶ğ—¸ğ—² ğ˜ğ—µğ—¶ğ˜€ ğŸ˜€ğŸ˜€ ğ—µ ğ—¸ğ˜†ğ—® ğ—µğ—®ğ—¶ ğ—»ğ—®",
      "timestamp": "2026-02-08 23:13:40",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 4,
      "text": "Internal Server Error\nThe server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.",
      "timestamp": "2026-02-08 23:13:45",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 5,
      "text": "/tasks",
      "timestamp": "2026-02-08 23:13:48",
      "date": "February 08, 2026",
      "time": "11:13 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 6,
      "text": "The issue is likely because the GitHub token isn't set properly. Let me fix the code to handle errors better and download directly from GitHub:\n\n`python\n\"\"\"\nSimple Task Tracker with GitHub Storage\nFixed version with better error handling\n\"\"\"\n\nimport os\nimport json\nimport threading\nfrom datetime import datetime\nimport pytz\nfrom flask import Flask, request, render_template_string, send_file, jsonify\nimport telebot\nfrom telebot.types import InlineKeyboardMarkup, InlineKeyboardButton\nimport requests\nimport base64\nimport io\n\n# ============= CONFIGURATION =============\nBOT_TOKEN = \"8388773187:AAFxz5U8GJ94Wf21VaGvFx9QQSZFU2Rd43I\"\nUSER_ID = \"8469993808\"\n\n# GitHub Configuration - REPLACE THESE!\n# Get token from: GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens\nGITHUB_TOKEN = os.getenv('GITHUB_TOKEN', 'ghp_yourtokenhere')  # Set in Koyeb env vars\nGITHUB_REPO = os.getenv('GITHUB_REPO', 'sandip232/task-tracker-data')  # Your repo\nGITHUB_FILE_PATH = \"data.json\"\n\n# Timezone setup\nIST = pytz.timezone('Asia/Kolkata')\n\n# Initialize Flask and Telegram bot\napp = Flask(name)\nbot = telebot.TeleBot(BOT_TOKEN)\n\n# ============= GITHUB HELPER FUNCTIONS =============\ndef load_from_github():\n    \"\"\"Load data from GitHub\"\"\"\n    try:\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            print(\"âŒ GitHub token not configured\")\n            return None\n            \n        url = f\"https://api.github.com/repos/{GITHUB_REPO}/contents/{GITHUB_FILE_PATH}\"\n        headers = {\n            \"Authorization\": f\"Bearer {GITHUB_TOKEN}\",\n            \"Accept\": \"application/vnd.github.v3+json\"\n        }\n        \n        response = requests.get(url, headers=headers, timeout=10)\n        \n        if response.status_code == 200:\n            content = response.json()[\"content\"]\n            decoded = base64.b64decode(content).decode('utf-8')\n            data = json.loads(decoded)\n            print(f\"âœ… Loaded {len(data.get('tasks', []))} tasks from GitHub\")\n            return data\n        elif response.status_code == 404:\n            print(\"ğŸ“„ GitHub file not found, will create on first save\")\n            return {\n                \"tasks\": [],\n                \"messages\": [],\n                \"notes\": [],\n                \"last_id\": 0\n            }\n        else:\n            print(f\"âŒ GitHub API Error {response.status_code}: {response.text[:100]}\")\n            return None\n    except requests.exceptions.Timeout:\n        print(\"âŒ GitHub request timeout\")\n        return None\n    except Exception as e:\n        print(f\"âŒ Error loading from GitHub: {str(e)}\")\n        return None\n\ndef save_to_github(data):\n    \"\"\"Save data to GitHub\"\"\"\n    try:\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            print(\"âŒ GitHub token not configured, saving locally only\")\n            return False\n            \n        url = f\"https://api.github.com/repos/{GITHUB_REPO}/contents/{GITHUB_FILE_PATH}\"\n        headers = {\n            \"Authorization\": f\"Bearer {GITHUB_TOKEN}\",\n            \"Accept\": \"application/vnd.github.v3+json\"\n        }\n        \n        # Get current SHA\n        sha = None\n        get_response = requests.get(url, headers=headers, timeout=5)\n        if get_response.status_code == 200:\n            sha = get_response.json()[\"sha\"]\n        \n        # Prepare content\n        content = json.dumps(data, indent=2, ensure_ascii=False)\n        encoded = base64.b64encode(content.encode('utf-8')).decode('utf-8')\n        \n        # Create payload\n        payload = {\n            \"message\": f\"Update tasks - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\",\n            \"content\": encoded,\n            \"branch\": \"main\"\n        }\n        \n        if sha:\n            payload[\"sha\"] = sha\n        \n        # Save to GitHub\n        response = requests.put(url, headers=headers, json=payload, timeout=10)",
      "timestamp": "2026-02-08 23:15:19",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 7,
      "text": "new_task = {\n            \"id\": data[\"last_id\"] + 1,\n            \"text\": message.text,\n            \"timestamp\": get_ist_time().strftime('%Y-%m-%d %H:%M:%S'),\n            \"date\": get_ist_time().strftime('%B %d, %Y'),\n            \"time\": get_ist_time().strftime('%I:%M %p'),\n            \"type\": \"task\"\n        }\n        \n        data[\"tasks\"].append(new_task)\n        data[\"last_id\"] += 1\n        \n        success = save_data(data)\n        \n        if success:\n            reply = f\"âœ… <b>Saved to GitHub!</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\"\n        else:\n            reply = f\"âš ï¸ <b>Saved locally only</b>\\n\\n{message.text}\\n\\nğŸ“… {new_task['date']}\\nâ° {new_task['time']} IST\\n\\n<i>GitHub sync failed</i>\"\n        \n        bot.reply_to(message, reply, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['tasks'])\ndef show_tasks(message):\n    \"\"\"Show all tasks\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        data = load_data()\n        \n        if not data[\"tasks\"]:\n            bot.reply_to(message, \"ğŸ“­ <b>No tasks yet!</b>\\n\\nSend a message to add your first task.\", parse_mode='HTML')\n            return\n        \n        response = \"ğŸ“‹ <b>Your Tasks:</b>\\n\\n\"\n        \n        for task in data[\"tasks\"][-10:]:  # Last 10\n            response += f\"â€¢ {task['text']}\\n\"\n            response += f\"  â° {task['time']} | ğŸ“… {task['date']}\\n\\n\"\n        \n        if len(data[\"tasks\"]) > 10:\n            response += f\"<i>Showing last 10 of {len(data['tasks'])} tasks</i>\"\n        \n        bot.reply_to(message, response, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Error loading tasks:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['download'])\ndef download_command(message):\n    \"\"\"Download JSON from GitHub\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Try to get from GitHub first\n        data = load_from_github()\n        \n        if data is None:\n            # Fallback to local\n            data = load_data()\n            \n        json_str = json.dumps(data, indent=2, ensure_ascii=False)\n        \n        # Send as file\n        bot.send_document(\n            chat_id=message.chat.id,\n            document=io.BytesIO(json_str.encode('utf-8')),\n            visible_file_name='tasks_data.json',\n            caption=\"ğŸ“ <b>Tasks Data</b>\\n\\nJSON export of all tasks\"\n        )\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Download error:</b> {str(e)}\", parse_mode='HTML')\n\n@bot.message_handler(commands=['status'])\ndef status_command(message):\n    \"\"\"Check connection status\"\"\"\n    if str(message.chat.id) != USER_ID:\n        return\n    \n    try:\n        # Check GitHub connection\n        if not GITHUB_TOKEN or GITHUB_TOKEN == 'ghp_yourtokenhere':\n            status_msg = \"âŒ <b>GitHub Token:</b> Not configured\\n\"\n        else:\n            test_data = load_from_github()\n            if test_data is not None:\n                status_msg = f\"âœ… <b>GitHub:</b> Connected\\nğŸ“Š <b>Tasks:</b> {len(test_data.get('tasks', []))}\\n\"\n            else:\n                status_msg = \"âš ï¸ <b>GitHub:</b> Connection failed\\n\"\n        \n        # Check local data\n        data = load_data()\n        status_msg += f\"ğŸ’¾ <b>Local tasks:</b> {len(data.get('tasks', []))}\\n\"\n        status_msg += f\"ğŸ• <b>Last ID:</b> {data.get('last_id', 0)}\\n\"\n        status_msg += f\"â° <b>Time:</b> {get_ist_time().strftime('%I:%M %p')} IST\"\n        \n        bot.reply_to(message, status_msg, parse_mode='HTML')\n        \n    except Exception as e:\n        bot.reply_to(message, f\"âŒ <b>Status error:</b> {str(e)}\", parse_mode='HTML')",
      "timestamp": "2026-02-08 23:15:23",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    },
    {
      "id": 8,
      "text": "return html.format(\n            now.strftime('%B %d, %Y'),\n            len(data[\"tasks\"]),\n            github_status,\n            last_update,\n            tasks_html\n        )\n        \n    except Exception as e:\n        error_html = f'''\n        <!DOCTYPE html>\n        <html>\n        <head><title>Error</title><style>body {{ padding: 40px; font-family: sans-serif; }}</style></head>\n        <body>\n            <h1>âš ï¸ Server Error</h1>\n            <div style=\"background: #fee; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n                <strong>Error:</strong> {str(e)}\n            </div>\n            <p>Please check server logs for details.</p>\n            <button onclick=\"location.reload()\">Retry</button>\n        </body>\n        </html>\n        '''\n        return error_html\n\n@app.route('/download')\nde",
      "timestamp": "2026-02-08 23:15:26",
      "date": "February 08, 2026",
      "time": "11:15 PM",
      "type": "task",
      "source": "telegram"
    }
  ],
  "messages": [],
  "notes": [],
  "last_id": 8
}